" Makes search act like search in modern browsers
set incsearch

" enable smart indent
set smartindent

" tabstop and tab-shift-width
set tabstop=4
set shiftwidth=4

" Use spaces instead of tabs
" set expandtab

" toggle paste mode; usful to copy exact text b/w vim files
set pastetoggle=<F2>

" for Tag-list
filetype plugin on

" split window appear at right side
set splitright

" insert empty line after/before current line in cmd mode
nmap <F8> o<Esc><Up>
nmap <F9> O<Esc><Down>

" key combo to save and/or exit current vim session/window(s) in
" insert/command mode
" save changes and remain in same mode
imap <c-x><c-w> <Esc>:w<CR>i
nmap <c-x><c-w> <Esc>:w<CR>
" exit without save
imap <c-x><c-l> <Esc>:q!<CR>
nmap <c-x><c-l> <Esc>:q!<CR>
" exit with save
imap <c-x><c-z> <Esc>:wq<CR>
nmap <c-x><c-z> <Esc>:wq<CR>
" close all open windows in a vim session
imap <c-x><c-a> <Esc>:wqa!<CR>
nmap <c-x><c-a> <Esc>:wqa<CR>

" window switching made easier
nmap <S-Down> <C-w><Down>
nmap <S-Up> <C-w><Up>
nmap <S-Left> <C-w><Left>
nmap <S-Right> <C-w><Right>

" vimgrep, auto-load copen, browse through code with pattern
nmap <C-Down> <C-w><Down><Down><CR>
nmap <C-Up> <C-w><Down><Up><CR>
nmap <C-x><C-Up> :vimgrep <cword> **/*.[ch] <CR><CR>:copen<CR><CR>
nmap <S-x><S-Up> :vimgrep <cword> % <CR><CR>:copen<CR><CR>
nmap <C-x><C-Down> :cclose<CR><CR>

" add space in normal mode
nnoremap <space> i<space><Esc>

" toggle diff mode between different vim split windows using '\'+'f'
nnoremap <leader>f :call WdiffToggle()<cr>
function! WdiffToggle()
    if &diff
        windo diffoff
    else
        windo diffthis
    endif
endfunction

" vim diff view improvements
" Users can Customize further by defining OnDiffStartStub() and OnDiffEndStub() in ~/.cvimrc
function! OnDiffStart()
	" Improve diff mode readability - https://www.ditig.com/256-colors-cheat-sheet
	" Highlight lines added - white text, Blue3 bg
	highlight DiffAdd    cterm=bold ctermfg=15  ctermbg=19  guibg=#0000af
	" Highlight lines deleted - white text, DeepSkyBlue4 bg
	highlight DiffDelete cterm=bold ctermfg=15  ctermbg=23  guibg=#005f5f
	" Highlight lines changed - white text, Orange4 bg
	highlight DiffChange cterm=bold ctermfg=15  ctermbg=94 guibg=#875f00
	" Highlight altered segment inside changed line - white text, DarkRed bg
	highlight DiffText   cterm=bold ctermfg=15  ctermbg=88 guibg=#870000
	" Let users override above highlight defaults as they like
	if exists("*OnDiffStartStub") | call OnDiffStartStub() | endif
endfunction
function! OnDiffEnd()
	" Let users override above highlight defaults as they like
	if exists("*OnDiffEndStub") | call OnDiffEndStub() | endif
endfunction
augroup DiffWrapToggle
	autocmd!
	" When diff mode is enabled, update diff view colors and other parameters
	autocmd OptionSet diff if &diff | call OnDiffStart() | endif
	" When diff mode is disabled, reset parameters updated in OnDiffStart()
	autocmd OptionSet diff if !&diff | call OnDiffEnd() | endif
augroup END

" toggle 80-column limiter in any vim window using '\'+'l'
nnoremap <leader>l :call LimiteToggle()<cr>
function! LimiteToggle()
    if &colorcolumn == ''
        set colorcolumn=80
    else
        set colorcolumn=
    endif
endfunction

" toggle cursorline
nnoremap <leader>h :set cursorline!<CR>

" Have cscope results in cwindow or normal output using '\'+'q'
nnoremap <leader>q :call Qscope()<cr>
function! Qscope()
    if &cscopequickfix == 's-,c-,d-,i-,t-,e-'
        set cscopequickfix=s0,c0,d0,i0,t0,e0
        cclose
    else
        set cscopequickfix=s-,c-,d-,i-,t-,e-
        copen
    endif
endfunction

" dictionary auto-complete enable
set dictionary+=/usr/share/dict/words

set visualbell
set t_vb=
